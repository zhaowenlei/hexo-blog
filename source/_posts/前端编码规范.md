---
title: 前端编码规范
date: 2016-03-24 15:03:27
category: [前端]
tags: [编码规范]
toc: true
---

通用规范请参阅[http://alloyteam.github.io/CodeGuide/](http://alloyteam.github.io/CodeGuide/)，如有冲突，以本文为准。
## 规范目的
为了提高团队开发效率，减少沟通障碍，以及便于后期维护扩展，特制定此规范。本规范一经大家确认，前端开发人员必须按照此规范进行前端开发。规范中如有不恰之处，请及时提出，经讨论后修改或完善此规范。


## 基本准则
模块化，组件化，语义化jsx（html），结构（jsx）表现（css或less）行为（js）分离。

## 文件规范
1. 架构相关，非业务文件归档至`assets/src/framework`；
1. 业务相关公共组件归档至`assets/src/common`；
1. 业务模块统一归档至`assets/src/page`；
1. 图片个数超过5个以上，要归档至当前模块文件夹下的`imgs/`文件夹中；
1. 一个功能模块新建一个文件夹，一个模块相关的文件（html，css，js，jsx，images），归档至对应的模块文件夹中，当此模块不需要时，删除此模块对应的文件夹，即可将此模块相关文件全部移除；
1. 文件夹命名：小写英文+连字符（减号），比如：`account-manage`；
1. 模块的入口文件，统一命名成`index.jsx`，其他文件 驼峰式命名，首字母大写：比如`AccountManage.jsx`;
1. css/less命名：一个模块下基本就包含一个css/less文件，命名为style.css/style.less即可；
1. 图片：小写英文+连字符（减号），比如：`user-avatar.jpg`
1. 文件之间的依赖，统一使用ES6写法：`import request from xxx.jsx`；

## jsx

1. 文件名必须和默认输出完全保持一致
```javascript
// file CheckBox.js or CheckBox.jsx
class CheckBox {
  // ...
}
export default CheckBox;

// good
import CheckBox from './CheckBox';
```
1. 一个文件一个类，直接输出即可,否则修改类名，还得修改输出名。
```javascript
//bad
class ReservationCard extends React.Component {}
export default ReservationCard；
//good
export default class ReservationCard extends React.Component {}

```
1. import必须写在文件的头部
1. export必须写在文件底部，通过export {aaa,bbb,Ccc as ccc }方式导出多个变量，通过export default aaa 导出默认变量。
1. import各类型文件顺序
  - css/less文件
  - 第三方模块
  - 自定义模块
  - 图片
  - 模块变量

  比如：
  ```javascript
  // css/less文件
  import './style.less';
  //第三方模块
  import React from 'react';
  import {Link} from 'react-router'
  import {message, Button, Row, Col, Tabs, Progress } from 'antd'
  import assign from 'object-assign';
  import moment from 'moment';
  //自定义模块
  import Page from '../../framework/page/Page';
  import ajax from '../../framework/common/ajax'
  //图片
  import UserAvatar from './user-avatar.jpg'
  // 模块变量
  const TabPane = Tabs.TabPane;
  const ProgressLine = Progress.Line;

  ```
1. 声明引用一个第三方模块的变量，必须使用const
  ```javascript
  const TabPane = Tabs.TabPane;
  const ProgressLine = Progress.Line;
  ```
1. 尽量使用`const`声明变量
1. 普通变量使用驼峰式命名，比如`userAvatar`
1. React统一使用ES6写法
  ``` javascript
  // 是否考虑创建一个BaseComponent，其他类继承BaseComponent？
  // BaseComponent中可以封装一些常用方法。
  class App extends React.Component{
      // 构造函数
      constructor(props){
          super(props);
      }
      // 初始化state,替代原getInitialState, 注意前面没有static
      state = {
          showMenu:false
      };
      // 替代原propTypes，指定props参数规范， 属性,注意前面有static,属于静态方法.
      static propTypes = {
          autoPlay: React.PropTypes.bool.isRequired
      }
      // 默认defaultProps,替代原getDefaultProps方法, 注意前面有static,属于静态方法.
      static defaultProps = {
          loading:false
      };
      componentDidMount() {
          // do something yourself...
      }
      // 事件的写法,这里要使用箭头函数,箭头函数不会改变this的指向,否则函数内,this指的就不是当前对象了
      // React.CreatClass方式React会自动绑定this,ES6写法不会.
      handleClick = (e)=>{
          this.setState();//这里的this指的还是App
      };
      render(){

      }
  }
  ```
1. jsx类的结构顺序：
  - constructor
  - state
  - static propTypes
  - static defaultProps
  - 其他自定义属性或静态（类）属性
  - 周期函数componentDidMount等
  - 自定义函数handle系列等
  - 其他自定义辅助函数
  - render

  遵循这样的约定，方便快速查找各部分代码。

1. jsx中事件属性，统一on开头，比如
```html
<Sidebar onClick={this.handleClick} onToggle={this.handleToggle}></Sidebar>
```
1. 事件处理函数命名，统一`handle`开头，驼峰式命名，比如：`handleClick` `handleToggle`等
1. 事件统一使用箭头函数，箭头行数不会改变向上文（`this`指向），不必使用`bind`了。
  ```javascript
  handleClick = (e) => {
        // Do something here!
    };
  ```
1. 请求统一使用封装过的request
1. 提示信息统一使用 src/common.jsx/MESSAGE_CONTENT中维护的内容。
  ```javascript
  // 变量命名 取名字比较费劲 可读性较好
  exports const MESSAGE_CONTENT = {
      OPERATE_SUCCESS:'操作成功',
      OPERATE_FAILED:'操作失败',
      LOGIN_SUCCESS:'登陆成功',
      STORE_NAME_CAN_NOT_BE_NULL:'门店不能为空'
  }
  ```


## less/css
1. 每个模块如果只有一个less/css文件，要命名为`style.less/style.css`
1. 类名/id名 小写英文+连字符，比如：`.user-avatar`
1. 各个模块的样式，以一个大的父级开始写起，避免各个模块样式冲突
  ```less
  .account-manage{
    .block{
      ...
    }
    #some-id{
      ...
    }
  }  
  ```
1. 编写less时，避免嵌套多层。不要编写太过于复杂的less。


**未完待续**
